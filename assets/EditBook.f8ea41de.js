var R=Object.defineProperty;var w=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var A=(n,l,r)=>l in n?R(n,l,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[l]=r,_=(n,l)=>{for(var r in l||(l={}))U.call(l,r)&&A(n,r,l[r]);if(w)for(var r of w(l))V.call(l,r)&&A(n,r,l[r]);return n};import{_ as C,c as I,r as L,o as M,a as j,b as m,d as v,e as o,w as D,f as h,v as f,u,F,g as T,h as B,i as q,R as P,p as z,j as G,k as H,l as J}from"./index.0e9ac8ca.js";const k=n=>(z("data-v-d990e826"),n=n(),G(),n),O={class:"box"},Q={class:"modal__text"},W={class:"form-group"},X=k(()=>o("p",{class:"modal__title"},"Title",-1)),Y=k(()=>o("p",null,"Price",-1)),Z=k(()=>o("p",{class:"modal__title"},"Authors",-1)),$=["value","onKeyup"],tt=["onKeyup"],et={props:{bookId:{type:Number,required:!0}},setup(n){const l=n,r=H(),x=J(),d=I(()=>r.state.books.find(s=>s.id===l.bookId)),t=L({title:"",price:"",rate:0,newAuthor:""});M(()=>{var s,e,a,i,p,b;document.body.addEventListener("keydown",y),t.title=(s=d.value)==null?void 0:s.title,t.price=(e=d.value)==null?void 0:e.price,t.rate=(i=(a=d.value)==null?void 0:a.rate)!=null?i:1,t.authors=(b=(p=d.value)==null?void 0:p.authors.map(K=>K.name))!=null?b:[]}),j(()=>{document.body.removeEventListener("keydown",y)});const E=()=>{!t.newAuthor||(t.authors=[...t.authors,t.newAuthor],t.newAuthor="")},N=(s,e)=>{const a=s.target.value;if(!a){t.authors.splice(e,1);return}t.authors[e]=a},S=()=>{if(!t.price||Number.isNaN(+t.price)||!t.title)return;const s=[];t.authors.forEach(a=>s.push({name:a}));const e={authors:s,title:t.title,price:t.price,rate:t.rate};d.value?r.dispatch("updateBook",_(_({},d.value),e)):r.dispatch("addBook",e),c()},g=s=>{t.rate=s},c=()=>{x.back()},y=s=>{s.code==="Escape"&&(c(),s.preventDefault())};return(s,e)=>(m(),v("div",O,[o("div",{class:"modal-container",onClick:c},[o("div",{class:"modal-custom",onClick:e[3]||(e[3]=D(()=>{},["stop"]))},[o("div",Q,[o("form",null,[o("div",W,[X,h(o("input",{"data-test":"title",type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=a=>u(t).title=a)},null,512),[[f,u(t).title]]),Y,h(o("input",{"data-test":"price",type:"text",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=a=>u(t).price=a)},null,512),[[f,u(t).price]]),Z,(m(!0),v(F,null,T(u(t).authors,(a,i)=>(m(),v("div",{key:i},[o("input",{type:"text",class:"form-control",value:a,onKeyup:B(p=>N(p,i),["enter"])},null,40,$)]))),128)),h(o("input",{type:"text",class:"form-control",placeholder:"+Add Author","onUpdate:modelValue":e[2]||(e[2]=a=>u(t).newAuthor=a),onKeyup:B(E,["enter"])},null,40,tt),[[f,u(t).newAuthor]])]),o("div",null,[q(P,{onUpdateRate:g,rate:u(t).rate},null,8,["rate"])])])]),o("div",{class:"d-flex justify-content-center mt-2"},[o("button",{class:"modal__btn",onClick:S},"Save book")]),o("button",{class:"modal__btn link-2 mt-3rem",onClick:c})])])]))}};var at=C(et,[["__scopeId","data-v-d990e826"]]);export{at as default};
