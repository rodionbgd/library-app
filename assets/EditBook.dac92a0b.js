var I=Object.defineProperty,N=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var k=(o,s,a)=>s in o?I(o,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[s]=a,y=(o,s)=>{for(var a in s||(s={}))V.call(s,a)&&k(o,a,s[a]);if(f)for(var a of f(s))L.call(s,a)&&k(o,a,s[a]);return o},b=(o,s)=>N(o,U(s));import{_ as M,c as j,r as D,o as F,a as T,b as _,d as m,e as n,w as q,f as w,v as A,u,F as z,g as G,h as B,i as H,R as J,p as O,j as P,k as Q,l as W}from"./index.3e7ec613.js";const x=o=>(O("data-v-3ec0103b"),o=o(),P(),o),X={class:"box"},Y={class:"modal__text"},Z={class:"form-group"},$=x(()=>n("p",{class:"modal__title"},"Title",-1)),tt=x(()=>n("p",{class:"modal__title"},"Authors",-1)),et=["value","onKeyup"],ot=["onKeyup"],st={props:{bookId:{type:Number,required:!0}},setup(o){const s=o,a=Q(),E=W(),d=j(()=>a.state.books.find(e=>e.id===s.bookId)),t=D({title:"",rate:0,newAuthor:"",closeCounter:0,imgSrc:""});F(()=>{var e,r,l,c,p,h;document.body.addEventListener("keydown",v),t.title=(r=(e=d.value)==null?void 0:e.title)!=null?r:"",t.rate=(c=(l=d.value)==null?void 0:l.rate)!=null?c:1,t.authors=(h=(p=d.value)==null?void 0:p.authors.map(R=>R.name))!=null?h:[]}),T(()=>{document.body.removeEventListener("keydown",v)});const S=()=>{!t.newAuthor||(t.authors=[...t.authors,t.newAuthor],t.newAuthor="")},g=(e,r)=>{const l=e.target.value;if(!l){t.authors.splice(r,1);return}t.authors[r]=l},C=()=>{const e=[];t.authors.forEach(r=>e.push({name:r})),d.value?a.dispatch("updateBook",b(y({},d.value),{authors:e,title:t.title,rate:t.rate})):a.dispatch("addBook",{authors:e,title:t.title,rate:t.rate}),i()},K=e=>{t.rate=e},i=()=>{E.back()},v=e=>{e.code==="Escape"&&(i(),e.preventDefault())};return(e,r)=>(_(),m("div",X,[n("div",{class:"modal-container",onClick:i},[n("div",{class:"modal-custom",onClick:r[2]||(r[2]=q(()=>{},["stop"]))},[n("div",Y,[n("form",null,[n("div",Z,[$,w(n("input",{type:"text",class:"form-control","onUpdate:modelValue":r[0]||(r[0]=l=>u(t).title=l)},null,512),[[A,u(t).title]]),tt,(_(!0),m(z,null,G(u(t).authors,(l,c)=>(_(),m("div",{key:c},[n("input",{type:"text",class:"form-control",value:l,onKeyup:B(p=>g(p,c),["enter"])},null,40,et)]))),128)),w(n("input",{type:"text",class:"form-control",placeholder:"+Add Author","onUpdate:modelValue":r[1]||(r[1]=l=>u(t).newAuthor=l),onKeyup:B(S,["enter"])},null,40,ot),[[A,u(t).newAuthor]])]),n("div",null,[H(J,{onUpdateRate:K,rate:u(t).rate},null,8,["rate"])])])]),n("div",{class:"d-flex justify-content-center mt-2"},[n("button",{class:"modal__btn",onClick:C},"Save book")]),n("button",{class:"modal__btn link-2 mt-3rem",onClick:i})])])]))}};var nt=M(st,[["__scopeId","data-v-3ec0103b"]]);export{nt as default};
