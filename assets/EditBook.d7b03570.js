var I=Object.defineProperty,N=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var k=(o,a,r)=>a in o?I(o,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[a]=r,y=(o,a)=>{for(var r in a||(a={}))V.call(a,r)&&k(o,r,a[r]);if(f)for(var r of f(a))D.call(a,r)&&k(o,r,a[r]);return o},b=(o,a)=>N(o,U(a));import{_ as L,c as M,r as j,o as F,a as T,b as _,d as m,e as s,w as q,t as z,u,f as w,v as A,F as G,g as H,h as B,i as J,R as O,p as P,j as Q,k as W,l as X}from"./index.32926df4.js";const x=o=>(P("data-v-20cc5dfa"),o=o(),Q(),o),Y={class:"box"},Z={class:"modal__text"},$={class:"form-group"},tt=x(()=>s("p",{class:"modal__title"},"Title",-1)),et={"data-test":"title"},ot=x(()=>s("p",{class:"modal__title"},"Authors",-1)),st=["value","onKeyup"],at=["onKeyup"],rt={props:{bookId:{type:Number,required:!0}},setup(o){const a=o,r=W(),E=X(),d=M(()=>r.state.books.find(e=>e.id===a.bookId)),t=j({title:"",rate:0,newAuthor:""});F(()=>{var e,n,l,c,p,v;document.body.addEventListener("keydown",h),t.title=(n=(e=d.value)==null?void 0:e.title)!=null?n:"g",t.rate=(c=(l=d.value)==null?void 0:l.rate)!=null?c:1,t.authors=(v=(p=d.value)==null?void 0:p.authors.map(C=>C.name))!=null?v:[]}),T(()=>{document.body.removeEventListener("keydown",h)});const g=()=>{!t.newAuthor||(t.authors=[...t.authors,t.newAuthor],t.newAuthor="")},S=(e,n)=>{const l=e.target.value;if(!l){t.authors.splice(n,1);return}t.authors[n]=l},K=()=>{const e=[];t.authors.forEach(n=>e.push({name:n})),d.value?r.dispatch("updateBook",b(y({},d.value),{authors:e,title:t.title,rate:t.rate})):r.dispatch("addBook",{authors:e,title:t.title,rate:t.rate}),i()},R=e=>{t.rate=e},i=()=>{E.back()},h=e=>{e.code==="Escape"&&(i(),e.preventDefault())};return(e,n)=>(_(),m("div",Y,[s("div",{class:"modal-container",onClick:i},[s("div",{class:"modal-custom",onClick:n[2]||(n[2]=q(()=>{},["stop"]))},[s("div",Z,[s("form",null,[s("div",$,[tt,s("p",et,"test "+z(u(t).title),1),w(s("input",{type:"text",class:"form-control","onUpdate:modelValue":n[0]||(n[0]=l=>u(t).title=l)},null,512),[[A,u(t).title]]),ot,(_(!0),m(G,null,H(u(t).authors,(l,c)=>(_(),m("div",{key:c},[s("input",{type:"text",class:"form-control",value:l,onKeyup:B(p=>S(p,c),["enter"])},null,40,st)]))),128)),w(s("input",{type:"text",class:"form-control",placeholder:"+Add Author","onUpdate:modelValue":n[1]||(n[1]=l=>u(t).newAuthor=l),onKeyup:B(g,["enter"])},null,40,at),[[A,u(t).newAuthor]])]),s("div",null,[J(O,{onUpdateRate:R,rate:u(t).rate},null,8,["rate"])])])]),s("div",{class:"d-flex justify-content-center mt-2"},[s("button",{class:"modal__btn",onClick:K},"Save book")]),s("button",{class:"modal__btn link-2 mt-3rem",onClick:i})])])]))}};var ut=L(rt,[["__scopeId","data-v-20cc5dfa"]]);export{ut as default};
