var I=Object.defineProperty,N=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var k=(o,s,a)=>s in o?I(o,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[s]=a,y=(o,s)=>{for(var a in s||(s={}))V.call(s,a)&&k(o,a,s[a]);if(f)for(var a of f(s))L.call(s,a)&&k(o,a,s[a]);return o},b=(o,s)=>N(o,U(s));import{_ as M,c as j,r as D,o as F,a as T,b as _,d as m,e as r,w as q,f as w,v as A,u,F as z,g as G,h as B,i as H,R as J,p as O,j as P,k as Q,l as W}from"./index.d2b17c5b.js";const x=o=>(O("data-v-35ffba55"),o=o(),P(),o),X={class:"box"},Y={class:"modal__text"},Z={class:"form-group"},$=x(()=>r("p",{class:"modal__title"},"Title",-1)),tt=x(()=>r("p",{class:"modal__title"},"Authors",-1)),et=["value","onKeyup"],ot=["onKeyup"],st={props:{bookId:{type:[Number,void 0],default:void 0}},setup(o){const s=o,a=Q(),E=W(),d=j(()=>a.state.books.find(e=>e.id===s.bookId)),t=D({title:"",rate:0,newAuthor:"",closeCounter:0,imgSrc:""});F(()=>{var e,n,l,c,p,h;document.body.addEventListener("keydown",v),t.title=(n=(e=d.value)==null?void 0:e.title)!=null?n:"",t.rate=(c=(l=d.value)==null?void 0:l.rate)!=null?c:1,t.authors=(h=(p=d.value)==null?void 0:p.authors.map(R=>R.name))!=null?h:[]}),T(()=>{document.body.removeEventListener("keydown",v)});const S=()=>{!t.newAuthor||(t.authors=[...t.authors,t.newAuthor],t.newAuthor="")},g=(e,n)=>{const l=e.target.value;if(!l){t.authors.splice(n,1);return}t.authors[n]=l},C=()=>{const e=[];t.authors.forEach(n=>e.push({name:n})),d.value?a.dispatch("updateBook",b(y({},d.value),{authors:e,title:t.title,rate:t.rate})):a.dispatch("addBook",{authors:e,title:t.title,rate:t.rate}),i()},K=e=>{t.rate=e},i=()=>{E.back()},v=e=>{e.code==="Escape"&&(i(),e.preventDefault())};return(e,n)=>(_(),m("div",X,[r("div",{class:"modal-container",onClick:i},[r("div",{class:"modal-custom",onClick:n[2]||(n[2]=q(()=>{},["stop"]))},[r("div",Y,[r("form",null,[r("div",Z,[$,w(r("input",{type:"text",class:"form-control","onUpdate:modelValue":n[0]||(n[0]=l=>u(t).title=l)},null,512),[[A,u(t).title]]),tt,(_(!0),m(z,null,G(u(t).authors,(l,c)=>(_(),m("div",{key:c},[r("input",{type:"text",class:"form-control",value:l,onKeyup:B(p=>g(p,c),["enter"])},null,40,et)]))),128)),w(r("input",{type:"text",class:"form-control",placeholder:"+Add Author","onUpdate:modelValue":n[1]||(n[1]=l=>u(t).newAuthor=l),onKeyup:B(S,["enter"])},null,40,ot),[[A,u(t).newAuthor]])]),r("div",null,[H(J,{onUpdateRate:K,rate:u(t).rate},null,8,["rate"])])])]),r("div",{class:"d-flex justify-content-center mt-2"},[r("button",{class:"modal__btn",onClick:C},"Save book")]),r("button",{class:"modal__btn link-2 mt-3rem",onClick:i})])])]))}};var rt=M(st,[["__scopeId","data-v-35ffba55"]]);export{rt as default};
